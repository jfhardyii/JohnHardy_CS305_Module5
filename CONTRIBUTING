This change was pushed by Brandon Mack. This is the forked pull request variant.
